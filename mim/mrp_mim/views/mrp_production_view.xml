<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <record model="ir.ui.view" id="view_mrp_production_form_inherit">
        <field name="name">mrp.production.form.inherit</field>
        <field name="model">mrp.production</field>
        <field name="type">form</field>
        <field name="inherit_id" ref="mrp.mrp_production_form_view" />
        <field name="arch" type="xml">
        	<xpath expr="//button[@name='action_assign']" position="before">
        		<button type="object" name="action_compute" string="Calculer les données" class="oe_highlight" states="confirmed" />

        		<button type="object" name="set_state_to_verified" string="Fiche vérifiée" class="oe_highlight" states="confirmed" />

            	<!-- <button type="object" name="set_state_to_confirmed" string="Annuler production" class="highlight" states="confirmed,validated" /> -->

            	<button type="object" name="moves_ready" string="Confitmer la réservation" class="oe_highlight" states="validated" />

            	<button type="object" name="set_state_to_validated" string="Valider fiche de debit" class="oe_highlight" states="verified" />

            	<button type="object" name="set_state_to_confirmed" string="Remettre à nouveau" class="highlight" states="verified" />

            	<!--<button type="object" name="force_production" string="Forcer la production" class="oe_highlight" states="validated" />-->
        	
        	</xpath>
            <xpath expr="//field[@name='state']" position="replace">
            	<field name="state" widget="statusbar" statusbar_visible="confirmed,verified,validated,progress,done"/>
            </xpath>
            
            <xpath expr="//field[@name='bom_id']" position="after">
            	<field name="description"/>
            </xpath>
            
            <xpath expr="//field[@name='user_id']" position="before">
            	<field name="partner_id"/>
            </xpath>
            
            <xpath expr="/form/sheet/group" position="after">
	     	    <group string="Données en entrée" col="2">
	     	        <group>
	     	            <field name="is_printable" attrs="{'readonly': [('state','not in',('confirmed'))]}"/>
	     	            <field name="largeur" readonly="True"/>
						<field name="hauteur" readonly="True"/>
						<field name="tms" attrs="{'readonly': [('state','not in',('confirmed'))]}"/>
						<field name="style" attrs="{'readonly': [('state','not in',('confirmed'))]}"/>
						<field name="vitre" attrs="{'readonly': [('state','not in',('confirmed'))]}" />
						<field name="remplissage_vitre" attrs="{'readonly': [('state','not in',('confirmed'))]}"/>
	     	        </group>
	     	        <group>
	     	        	<field name="partner_name"/>
						<field name="intermediaire" attrs="{'readonly': [('state','not in',('confirmed'))]}"/>
						<field name="type_intermediaire" attrs="{'readonly': [('state','not in',('confirmed'))]}"/>
						<field name="moustiquaire" attrs="{'readonly': [('state','not in',('confirmed'))]}"/>
						<field name="division" attrs="{'readonly': [('state','not in',('confirmed'))]}"/>
						<field name="nb_division" attrs="{'readonly': [('state','not in',('confirmed'))]}" />
						<!--field name="batis_id" attrs="{'readonly': [('state','not in',('confirmed'))]}" /-->
						<field name="longueur_barre" attrs="{'readonly': [('state','not in',('confirmed'))]}"/>
						<field name="is_calculated" invisible="1"/>
					</group>
				</group>
			</xpath>
			<notebook>
				<page string="Articles prévus">
					<field name="product_lines">
						<tree>
							<field name="name" />
							<field name="product_qty" />
							<field name="product_uom_id" />
							<field name="is_accessory" />
						</tree>
					</field>
				</page>
				<page string="Articles et accessoires">
					<label for="product_lines1" />
					<field name="product_lines1">
						<tree>
							<field name="ref" />
							<field name="name" />
							<field name="product_qty" />
							<field name="product_qty_total" />
							<field name="len_unit" />
							<field name="len_total" />
						</tree>
					</field>
					<label for="product_lines2" />
					<field name="product_lines2">
						<tree>
							<field name="ref" />
							<field name="name" />
							<field name="product_qty" />
							<field name="product_qty_total" />
						</tree>
					</field>
				</page>
			</notebook>

        </field>
    </record>

</odoo>